//el componente para el registro de los usuarios con las variables de estado necesarias.
import React, { useState } from 'react';
import * as auth from '../utils/auth';
import { Link, useHistory } from 'react-router-dom';

export default function Register(props){
  const history = useHistory(); 

  const [values, setValues] = useState({
    email: "",
    password: "",
  });

  
  function handleChange(e) {
      const { name, value } = e.target;
      setValues({...values, [name]: value});
    }

  
  //ACÁ LLAMAMOS A LA FUNCIÓN AUTH:
  function handleSubmit(e) {
      e.preventDefault();
      auth.register(values)
      .then((res) => {
        history.push("/signin");
        props.handleStateInfo()
      })
      .catch((err) => {
        console.log(err); // Manejar el error del registro
      });
  
  } 

      return (
        <div className="login">
          <p className="login__welcome">Regístrate</p>
          <form className="form" >
          <div className="form__field">
            <input
            className="form__input"
            placeholder="Correo electrónico"
              name="email"
              type="email"
              minLength="2"
              maxLength="50"
              value={values.email}
              onChange={handleChange}
              required
            />
          </div>

          <div className="form__field">
            <input
            className="form__input"
            placeholder="Contraseña"
              name="password"
              type="password"
              minLength="2"
              maxLength="50"
              value={values.password}
              onChange={handleChange}
              required
            />
              </div>
              <button onClick={handleSubmit} type="submit" className="form__button">
              Regístrate
        </button>
          </form>

          < Link to="/signin" className="login__link">
          ¿Ya eres miembro? Inicia sesión aquí
        </Link>

        </div>
      );
    }

   

  
 



